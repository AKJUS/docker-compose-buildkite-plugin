#!/bin/bash
set -ueo pipefail

DIR="$(cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd)"

. "$DIR/../lin/shared.bash"

if [[ ! -z "${BUILDKITE_PLUGIN_DOCKER_COMPOSE_BUILD:-}" ]]; then
  . "$DIR/commands/build.sh"
elif [[ ! -z "${BUILDKITE_PLUGIN_DOCKER_COMPOSE_RUN:-}" ]]; then
  . "$DIR/commands/run.sh"
else
  echo "+++ Docker Compose plugin error"
  echo "No build or run options were specified"
  exit 1
fi
